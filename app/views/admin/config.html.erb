<%= render "admin/admin_navbar" %>
<script>
	var view = "config";

	function addRow(){
		$('#last-conf-field').off('change');
		$('#last-conf-field').removeAttr('id');
		$('#config-fields').append('<%=j render partial: 'admin/config_row' %>');
		$('#last-conf-field').on('change', function(){ addRow(); });

		$tokenfields = $('.tokenfield-syn');
		var name = 'syn['+($tokenfields.size()-1)+']';

		$tokenfields.last().attr('name', name);
	}

	function escapeRegExp(str) {
		return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
	}
</script>

<style>
	ul {
		list-style-type: none;
	}

	.rem-padding {
		padding-left: 0;
		padding-right: 0;
	}
</style>

<div id="contents" class="container">
<%= form_tag(submit_config_path, method: "post") do %>
	<div class="row">
		<div class="col-md-12 col-md-offset-0 col-xs-10 col-xs-offset-1 well">
			<div class="form-group">
				<%= label_tag(:label_url, "Enter the links to the webpages (separate each link by a comma).") %>
				<%= text_field_tag(:url, "", :class => "form-control input-lg", :id => "tokenfield-url", :required => true) %>
			</div>
		</div>
	</div>
	
	<div id="config-fields">
	</div>
	
	<script>addRow();</script>

	<div class="row">
		<div class="col-md-12 col-md-offset-0 col-xs-10 col-xs-offset-1 rem-padding">
			<div class="form-group">
				<button type="button" class="btn btn-default btn-block" onclick="addRow()">
					<span class="glyphicon glyphicon-plus"></span> Add Row
				</button>
			</div>
		</div>
	</div>

	<div class="row">
		<div class="col-md-12 col-md-offset-0 col-xs-10 col-xs-offset-1 rem-padding">
			<div class="form-group">
				<%= submit_tag("Submit", :id => "submit", :class => "btn btn-primary btn-lg pull-right") %>
			</div>
		</div>
	</div>
<% end %>
</div>
<br />

<script>
$('#tokenfield-url').tokenfield({
  delimiter: [',', ' ', ';']
})
$('.tokenfield-syn').tokenfield({
  delimiter: [',', ';']
})
</script>
